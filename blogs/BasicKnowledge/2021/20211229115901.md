---
title: uni-app组件和网络请求
date: 2021-12-29
tags:
 - uni-app
 - HBuilderX
 - DCloud
categories:
 - 小程序
 - 前端
---


# `uni-app`组件库学习

安装HBX的时候，安装三个插件：

`内置浏览器`

`sass` 一些组件库里的css时使用的sass写法

`prettier` 格式化代码 组件标签中有很多属性 一行显示不了可以折行显示





## `uni-app`组件库

`uni-app`式`DCloud`提供的一个跨段`ui`库，它是基于`vue`组件的、flex布局的、无`dom`的跨全端`ui`框架。

`uni-app`理论上可以使用基于`vue`开发的组件库。但是如果是跨端应用，其他UI组件可能存在兼容性问题。

`uni-ui`毕竟是官方出的，兼容性好些，使用第三方的组件库 需要使用`npm`安装 并引入注册使用

![image-20211229095539143](C:\Users\Kittors\AppData\Roaming\Typora\typora-user-images\image-20211229095539143.png)

`uni-ui`生成的`uni-module`遵循`easycom`机制，无需手动导入使用



## 徽章

小脚表  提示数字的

```vue
<view style="margin-top: 20rpx;">
	<!-- :is-dot="true" 缩写is-dot -->
    
	<uni-badge is-dot text="25" type="error" size="normal" absolute="rightTop">
		<button type="primary" size="mini">收件信息</button>	
	</uni-badge>
</view>
```



组件参数的数据类型不对报错  

解决方案：在组件传参的时候，注意如果是非字符串类型的值，需要通过：号绑定。绑定后js代码会解析处理。只有JS里才有数据类型的概念

****

# 卡片组件

```vue
<template>
	<view>
		<!-- ucard -->
		<uni-card>
			<!-- text文本样式的容器 -->
			<text>这是一个基础卡片样式</text>
		</uni-card>
		<!-- 标题和额外信息的 -->
		<uni-card :isFull="true" title="标题文字" extra="额外信息" sub-title="副标题" thumbnail="/static/uni.png">
			<!-- text文本样式的容器 -->
			<text>这是一个基础卡片样式</text>
		</uni-card>
		<!-- 图片覆盖 插槽 -->
		<!-- <uni-card cover="/static/uni.png"> -->
		<uni-card cover="/static/uni.png">
			<image slot="cover" style="width: 100%;" src="/static/uni.png" mode=""></image>
			<text>这是一个带封面图片和底部操作栏的样例,这里使用了插槽的写法</text>
			<view slot="actions" class="card-actions">
				<view class="card-actions-item" @click="actionsClick('分享')">
					<uni-icons type="pyq" size="20" color="#999"></uni-icons>
					<text class="card-actions-item-text">分享</text>
				</view>
				<view class="card-actions-item" @click="actionsClick('点赞')">
					<uni-icons type="pyq" size="20" color="#999"></uni-icons>
					<text class="card-actions-item-text">点赞</text>
				</view>
				<view class="card-actions-item" @click="actionsClick('收藏')">
					<uni-icons type="heart" size="20" color="#999"></uni-icons>
					<text class="card-actions-item-text">收藏</text>
				</view>
				<view class="card-actions-item" @click="actionsClick('投币')">
					<uni-icons type="chatbubble" size="20" color="#999"></uni-icons>
					<text class="card-actions-item-text">投币</text>
				</view>
			</view>
		</uni-card>
	</view>
	
</template>

<script>
export default {
	// 方法
	methods:{
		actions(){
			console.log(a)
		}
	}
};
</script>

<style scoped>
	.card-actions{
		display: flex;
		flex-direction: row;
		justify-content: space-around;
		.card-actions-item-text{
			font-size: 18px;
		}
	}
</style>

```





# `uni-app`的网络请求

客户端发送网络请求 通过JS代码发送请求.底层是`xmlHttpRequest`对象.

>  原生:`xmlHttpRequest` XHR
>
> jQuery: $.get $.post $.ajax
>
> `Vue`: `axios`
>
> 微信小程序:`wx.request`
>
> `uni-app`:`uni.request`

## 案例:通过card布局站视新闻信息

接口地址:

> https://api.apiopen.top/getWangYiNews

发送数据 查看返回数据 存数据到本地 站视数据到页面上

发请求=>拿数据=>村本地=>做展示

```vue
<template>
	<view>
		<!--4.做展示-->
		<!-- v-for循环遍历标签 -->
		<!-- :属性动态绑定 绑定后的值会进行JS的处理 解析变量 -->
		<uni-card v-for="(item,index) in data" :key = "index"  :cover="item.image">
			<view style="color: #000000;font-size: 1.2em; font-weight: bold;">{{item.title}}</view>
			<view style="color: #000000;font-size: 1.1em;">{{item.passtime}}</view>
		</uni-card>
	</view>
</template>

<script>
	export default {
		// 组件 状态 数据
		data() {
			// 页面模板中展示的数据 需要在这里存储
			return {
				// 初始化数据为空
				data: null
			}
		},
		// 组件挂在时
		mounted() {
			// 调用请求方法
			this.getData()
		},
		methods:{
			// 1.发请求
			getData(){
				// ureq
			uni.request({
				// 接口地址
				url:'https://api.apiopen.top/getWangYiNews',
				// 请求方法
				methods:'GET',
				// 请求携带参数
				data:{},
				// 请求成功后的回调
				success:res=>{
					// 2.拿数据
					console.log(res)
					// 3.存本地  根据需要的数据结构存
					this.data = res.data.result
				},
				// 请求失败的回调
				fail:(err)=>{
					console.log(err)
				},
				// 执行完成的回调
				complete:()=>{}
			})
			}	
		}
	}
</script>

<style scoped>

</style>
```

